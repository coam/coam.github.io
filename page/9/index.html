<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>商运物流</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="商运物流">
<meta property="og:url" content="https://coam.co/page/9/index.html">
<meta property="og:site_name" content="商运物流">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="商运物流">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="商运物流" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/author.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">张亚飞</a></h1>
        </hgroup>

        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:zyf@lonal.com" title="Email"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/zyfmix" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/markdown-gfw-hexo-jekyll/" style="font-size: 10px;">markdown gfw hexo jekyll</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://coam.co">商运物流</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/zyfmix/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://wp.iirii.com/">商运技术博客</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于物流设计</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">张亚飞</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img lazy-src="/img/author.jpg" class="js-avatar">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">张亚飞</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:zyf@lonal.com" title="Email"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/zyfmix" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Android/LearnAndroidDesign" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/10/Android/LearnAndroidDesign/" class="article-date">
      <time datetime="2016-01-10T11:41:31.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Android/LearnAndroidDesign/">Title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Android-Design-相关"><a href="#Android-Design-相关" class="headerlink" title="Android Design 相关"></a>Android Design 相关</h3><p>首先看一下要怎么实现水平的虚分割线:<br>在 drawable 文件下建立 line_dotted_horizontal.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">shape</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">       <span class="attribute">android:shape</span>=<span class="value">"line"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">stroke</span></span><br><span class="line">        <span class="attribute">android:color</span>=<span class="value">"#C7B299"</span></span><br><span class="line">        <span class="attribute">android:dashGap</span>=<span class="value">"6px"</span></span><br><span class="line">        <span class="attribute">android:dashWidth</span>=<span class="value">"6px"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="title">shape</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>按如下方式引用:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">View</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">      <span class="attribute">android:layout_width</span>=<span class="value">"match_parent"</span></span><br><span class="line">      <span class="attribute">android:layout_height</span>=<span class="value">"1px"</span></span><br><span class="line">      <span class="attribute">android:background</span>=<span class="value">"@drawable/line_dotted_horizontal"</span></span><br><span class="line">      <span class="attribute">android:layerType</span>=<span class="value">"software"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意:需要添加 android:layerType=”software” 否则在有些设备上仍然显示实线</p>
<p>垂直的虚线</p>
<p>drawable 下新建 line_dotted_vertical.xml</p>
<p>填上参考一下 <!-- 以上参考 http://kyleduo.com/?p=444--></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">layer-list</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">item</span></span><br><span class="line">        <span class="attribute">android:left</span>=<span class="value">"-300dp"</span></span><br><span class="line">        <span class="attribute">android:right</span>=<span class="value">"-300dp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">rotate</span></span><br><span class="line">            <span class="attribute">android:drawable</span>=<span class="value">"@drawable/line_dotted_horizontal"</span></span><br><span class="line">            <span class="attribute">android:fromDegrees</span>=<span class="value">"90"</span></span><br><span class="line">            <span class="attribute">android:toDegrees</span>=<span class="value">"90"</span></span><br><span class="line">            <span class="attribute">android:visible</span>=<span class="value">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>或者 <!-- 以下参考 http://stackoverflow.com/questions/20583298/creating-horizontal-and-vertical-dotted-lines-in-android--></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">rotate</span> <span class="attribute">xmlns:android</span>=<span class="value">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">        <span class="attribute">android:drawable</span>=<span class="value">"@drawable/line_dotted_horizontal"</span></span><br><span class="line">        <span class="attribute">android:fromDegrees</span>=<span class="value">"90"</span></span><br><span class="line">        <span class="attribute">android:toDegrees</span>=<span class="value">"90"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<p>参考列表</p>
<p><a href="http://stackoverflow.com/questions/20583298/creating-horizontal-and-vertical-dotted-lines-in-android" target="_blank" rel="external">Creating horizontal and vertical dotted lines in android</a><br><a href="http://kyleduo.com/?p=444" target="_blank" rel="external">How to create vertical dashed line divider using xml in Android?</a><br><a href="http://www.techrepublic.com/blog/software-engineer/pro-tip-add-a-dashed-line-in-an-android-layout/" target="_blank" rel="external">Pro tip: Add a dashed line in an Android layout</a><br><a href="http://www.jianshu.com/p/e1e8af5c3a80" target="_blank" rel="external">画个虚线箭头连接引导2个View</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Android/LearnAndroidContext" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/10/Android/LearnAndroidContext/" class="article-date">
      <time datetime="2016-01-10T11:41:31.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Android/LearnAndroidContext/">Title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Android-上下文-相关"><a href="#Android-上下文-相关" class="headerlink" title="Android 上下文 相关"></a>Android 上下文 相关</h3><ol>
<li>它描述的是一个应用程序环境的信息,即上下文.</li>
<li>该类是一个抽象(abstract class)类,Android提供了该抽象类的具体实现类(后面我们会讲到是ContextIml类).</li>
<li>通过它我们可以获取应用程序的资源和类,也包括一些应用级别操作,例如:启动一个Activity,发送广播,接受Intent信息 等.</li>
</ol>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="https://bxbxbai.github.io/2014/07/16/context/" target="_blank" rel="external">Context,什么是Context?</a><br><a href="http://blog.csdn.net/qinjuning/article/details/7310620" target="_blank" rel="external">Android中Context详解 —- 你所不知道的Context</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Android/LearnAndroid" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/10/Android/LearnAndroid/" class="article-date">
      <time datetime="2016-01-10T11:41:31.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Android/LearnAndroid/">Title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Android-相关"><a href="#Android-相关" class="headerlink" title="Android 相关"></a>Android 相关</h1><p><a href="http://guides.codepath.com/android" target="_blank" rel="external">CodePath Android Cliffnotes</a><br><a href="http://chenqichao.me/2015/08/01/161-Amazing-utils-in-android-api/" target="_blank" rel="external">Android开发中那些相见恨晚的方法. 类. 接口. 工具</a><br><a href="http://chenqichao.me/2015/07/13/120-Cracking-the-Coding-Interview-1.1/" target="_blank" rel="external">C 算法研究学习</a><br><a href="http://www.androidchina.net/2141.html" target="_blank" rel="external">最佳实践之Android代码规范</a></p>
<p><a href="http://www.jianshu.com/p/66ac183f8ec1" target="_blank" rel="external">Android经典面试问题</a><br><a href="http://www.salton123.com/2016/01/26/%E5%AE%89%E5%8D%93%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%BB%E7%BB%93/" target="_blank" rel="external">安卓面试题总结</a></p>
<h2 id="不错的-Android-开发者博客"><a href="#不错的-Android-开发者博客" class="headerlink" title="不错的 Android 开发者博客"></a>不错的 Android 开发者博客</h2><p><a href="http://www.race604.com/java-double-checked-singleton/" target="_blank" rel="external">Java 单例真的写对了么?</a><br><a href="http://givemepass-blog.logdown.com/" target="_blank" rel="external">Givemepass’s Android 惡補筆記</a><br><a href="https://www.zybuluo.com/mSolo/note/89294" target="_blank" rel="external">Android 经验碎片笔记(一)</a><br><a href="http://droidyue.com/blog/2015/04/12/avoid-memory-leaks-on-context-in-android/" target="_blank" rel="external">避免Android中Context引起的内存泄露</a><br><a href="http://droidyue.com/blog/2015/09/26/android-tuning-tool-strictmode/" target="_blank" rel="external">Android性能调优利器StrictMode</a></p>
<p><a href="http://landerlyoung.github.io/" target="_blank" rel="external">http://landerlyoung.github.io/ - retrolambda测试报告</a><br><a href="http://zlv.me/posts/2015/07/13/14_android-studio-tips/" target="_blank" rel="external">JeremyHe - 倍数提高工作效率的Android Studio奇技</a></p>
<p><a href="http://inthecheesefactory.com/blog/things-you-need-to-know-about-android-m-permission-developer-edition/en" target="_blank" rel="external">Everything every Android Developer must know about new Android’s Runtime Permission</a></p>
<p><a href="http://hukai.me/android-dev-patterns/" target="_blank" rel="external">Android开发最佳实践</a><br><a href="http://zmywly8866.github.io/2015/12/12/android-develop-experencies.html" target="_blank" rel="external">Android开发经验总结</a></p>
<p><a href="http://yaohepeng.com/2016/04/01/RxJava%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" target="_blank" rel="external">姚贺鹏的博客 - 记录生活点滴 -  RxJava入门使用教程</a><br><a href="http://www.u3coding.com/2016/03/10/android%E4%B8%ADview%E7%9A%84%E6%BB%91%E5%8A%A8%E5%86%B2%E7%AA%81%E5%8F%8A%E5%85%B6%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F/" target="_blank" rel="external">u3coding - Android中View的滑动冲突及其解决方式</a></p>
<hr>
<h3 id="优秀-Android-开发博客"><a href="#优秀-Android-开发博客" class="headerlink" title="优秀 Android 开发博客"></a>优秀 Android 开发博客</h3><p><a href="http://www.sunmoonblog.com/" target="_blank" rel="external">http://www.sunmoonblog.com/</a><br><a href="http://zmywly8866.github.io/" target="_blank" rel="external">http://zmywly8866.github.io/</a><br><a href="http://blog.lichengwu.cn/java/2014/03/21/jdk8-in-action/" target="_blank" rel="external">佐井 ~ 做有积累的事情</a><br><a href="http://yuluoding.com/" target="_blank" rel="external">如何阅读Android源码</a></p>
<hr>
<h3 id="Android-不错的文章收藏"><a href="#Android-不错的文章收藏" class="headerlink" title="Android 不错的文章收藏"></a>Android 不错的文章收藏</h3><p><a href="http://blog.lichengwu.cn/java/2013/11/24/use-findbugs-code-review/" target="_blank" rel="external">使用findbugs为自己的代码review</a><br><a href="http://leanote.com/blog/post/561658f938f41126b2000298?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io" target="_blank" rel="external">Android6.0 新特性详解</a><br><a href="http://pingguohe.net/2016/02/26/Android-App-secure-ssl.html" target="_blank" rel="external">Android App 安全的HTTPS 通信</a><br><a href="http://www.race604.com/flatbuffers-intro/" target="_blank" rel="external">FlatBuffers 体验-跨平台数据解析库</a></p>
<hr>
<h3 id="Android开发-so文件知识"><a href="#Android开发-so文件知识" class="headerlink" title="Android开发 so文件知识"></a>Android开发 so文件知识</h3><p><a href="http://alphayang.community/2015/11/27/so-files-guide/" target="_blank" rel="external">Android开发,不可不知的so文件知识大全</a></p>
<hr>
<h3 id="Android开发-Data-Binding-数据绑定"><a href="#Android开发-Data-Binding-数据绑定" class="headerlink" title="Android开发 Data Binding 数据绑定"></a>Android开发 Data Binding 数据绑定</h3><p><a href="https://developer.android.com/topic/libraries/data-binding/index.html" target="_blank" rel="external">Data Binding Library</a><br><a href="https://github.com/LyndonChin/MasteringAndroidDataBinding" target="_blank" rel="external">LyndonChin/MasteringAndroidDataBinding</a><br><a href="https://www.zhihu.com/question/32037895" target="_blank" rel="external">Android 开发有哪些新技术出现？</a><br><a href="http://stackoverflow.com/questions/27414173/equivalent-of-listview-setemptyview-in-recyclerview" target="_blank" rel="external">Equivalent of ListView.setEmptyView in RecyclerView</a><br><a href="http://stackoverflow.com/questions/28217436/how-to-show-an-empty-view-with-a-recyclerview" target="_blank" rel="external">How to show an empty view with a RecyclerView?</a></p>
<hr>
<h3 id="Android6-权限知识"><a href="#Android6-权限知识" class="headerlink" title="Android6 权限知识"></a>Android6 权限知识</h3><p><a href="http://inthecheesefactory.com/blog/things-you-need-to-know-about-android-m-permission-developer-edition/en" target="_blank" rel="external">Everything every Android Developer must know about new Android’s Runtime Permission</a><br><a href="http://hotchemi.github.io/PermissionsDispatcher/" target="_blank" rel="external">Permissionsdispatcher 权限管理注解</a><br><a href="https://developer.android.com/intl/es/training/permissions/best-practices.html#testing" target="_blank" rel="external">Android.com - Permissions Best Practices</a><br><a href="http://blog.csdn.net/quan356270259/article/details/50876272" target="_blank" rel="external">Android6.0权限管理-PermissionsDispatcher</a></p>
<p><a href="http://droidyue.com/blog/2016/01/17/understanding-marshmallow-runtime-permission/" target="_blank" rel="external">聊一聊Android 6.0的运行时权限</a><br><a href="http://jijiaxin89.com/2015/08/30/Android-s-Runtime-Permission/" target="_blank" rel="external">Android M 新的运行时权限开发者需要知道的一切</a><br><a href="https://segmentfault.com/a/1190000004348012" target="_blank" rel="external">Android工具箱之Android 6.0权限管理</a><br><a href="https://www.aswifter.com/2015/11/04/android-6-permission/" target="_blank" rel="external">Android 6.0 运行时权限处理</a></p>
<p><a href="http://lmbj.net/blog/solve-android-5.0-installed-app-failed-problem/" target="_blank" rel="external">解决Android5.0应用安装失败的问题</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Installation failed with message INSTALL_FAILED_DUPLICATE_PERMISSION</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Android-电源管理"><a href="#Android-电源管理" class="headerlink" title="Android 电源管理"></a>Android 电源管理</h3><p><a href="http://zlv.me/posts/2015/06/09/12_keep-device-awake/" target="_blank" rel="external">保持设备为唤醒状态</a><br><a href="http://landerlyoung.github.io/blog/2014/10/31/androidzhong-de-wakelockshi-yong/" target="_blank" rel="external">Android中的WakeLock使用</a></p>
<hr>
<hr>
<h3 id="Android-的-AlarmManager"><a href="#Android-的-AlarmManager" class="headerlink" title="Android 的 AlarmManager"></a>Android 的 AlarmManager</h3><p><a href="http://zlv.me/posts/2015/06/10/13_tips-when-using-repeating-alarms/" target="_blank" rel="external">在Android中使用Alarm小结</a></p>
<hr>
<h3 id="Android-监听短信"><a href="#Android-监听短信" class="headerlink" title="Android 监听短信"></a>Android 监听短信</h3><p><a href="http://hello1010.com/verifycode/" target="_blank" rel="external">注册信息验证时的用户体验提升</a><br><a href="http://landerlyoung.github.io/blog/2014/09/30/an-zhuo-jian-ting-xin-shou-dao-duan-xin/" target="_blank" rel="external">安卓监听新收到短信</a></p>
<hr>
<h3 id="Android-Service"><a href="#Android-Service" class="headerlink" title="Android Service"></a>Android Service</h3><p><a href="http://www.apkbus.com/android-6760-1.html" target="_blank" rel="external">Android里Service的bindService()和startService()混合使用深入分析</a><br><a href="http://landerlyoung.github.io/blog/2014/11/09/androidzhong-servicede-shi-yong/" target="_blank" rel="external">Android中service的使用</a><br><a href="http://www.cnblogs.com/menlsh/archive/2013/04/25/3043770.html" target="_blank" rel="external">Android学习笔记39:Android四大组件之Service</a></p>
<p><a href="http://www.jianshu.com/p/ae09fafe88bc" target="_blank" rel="external">基础总结篇之四:Service全解析</a><br><a href="http://blog.csdn.net/u011068702/article/details/50724546" target="_blank" rel="external">Andorid之BINDSERVICE的使用方法总结</a><br><a href="http://zhidao.baidu.com/link?url=VMt5yQESfrjEg6CYp1POuMFeBz0kcAUuPNyWYcDAzT1MFYL_pn5sW-U21-mBHT7L2z9iiPeyYPFIxu0tGaZYhcqzeQ1M3nlzjLfbwMuZxKu" target="_blank" rel="external">android startservice和bindservice的区别</a></p>
<hr>
<h3 id="Android-BroadcastReceiver"><a href="#Android-BroadcastReceiver" class="headerlink" title="Android BroadcastReceiver"></a>Android BroadcastReceiver</h3><p><a href="http://www.jianshu.com/p/903e08cba4b6" target="_blank" rel="external">基础总结篇之五:BroadcastReceiver应用详解</a></p>
<hr>
<h3 id="Android-Notification"><a href="#Android-Notification" class="headerlink" title="Android Notification"></a>Android Notification</h3><p><a href="http://www.jianshu.com/p/5c6ec7ed6109" target="_blank" rel="external">Notification使用</a></p>
<hr>
<h4 id="Android-Camera"><a href="#Android-Camera" class="headerlink" title="Android Camera"></a>Android Camera</h4><p><a href="http://ragnraok.github.io/rxcamera-introduce.html" target="_blank" rel="external">RxCamera, 一个RxJava风格的android camera封装</a><br><a href="https://github.com/ragnraok/RxCamera" target="_blank" rel="external">RxCamera</a></p>
<hr>
<hr>
<h4 id="Android-动画相关"><a href="#Android-动画相关" class="headerlink" title="Android 动画相关"></a>Android 动画相关</h4><p><a href="http://www.lightskystreet.com/2015/08/31/android_how_to_lean_anim_efficiently/" target="_blank" rel="external">如何高效的学习Android动画</a><br><a href="https://github.com/dodola/MetaballLoading" target="_blank" rel="external">dodola/MetaballLoading</a><br><a href="https://github.com/daimajia/AndroidViewAnimations" target="_blank" rel="external">daimajia/AndroidViewAnimations 动画集合</a></p>
<hr>
<h4 id="Android-Emoji"><a href="#Android-Emoji" class="headerlink" title="Android Emoji"></a>Android Emoji</h4><p><a href="http://www.cypressnorth.com/wp-content/uploads/2013/05/Google-Hangout-Emojis.jpg" target="_blank" rel="external">http://www.cypressnorth.com/wp-content/uploads/2013/05/Google-Hangout-Emojis.jpg</a><br><a href="http://emojipedia.org/google/" target="_blank" rel="external">Google-Hangout-Emojis</a><br><a href="http://apps.timwhitlock.info/emoji/tables/unicode#block-3-transport-and-map-symbols" target="_blank" rel="external">Emoji Unicode Tables</a></p>
<hr>
<hr>
<h3 id="Android-Bitmap"><a href="#Android-Bitmap" class="headerlink" title="Android Bitmap"></a>Android Bitmap</h3><p><a href="http://www.lightskystreet.com/2015/01/31/official-doc-study-canvas-and-drawable/" target="_blank" rel="external">官方文档学习 - Canvas and Drawables</a><br><a href="http://keeganlee.me/post/android/20150916" target="_blank" rel="external">Android样式的开发:drawable汇总篇</a></p>
<hr>
<h3 id="Canvas"><a href="#Canvas" class="headerlink" title="Canvas"></a>Canvas</h3><p><a href="http://blog.csdn.net/qinjuning/article/details/6936783" target="_blank" rel="external">Andriod中绘(画)图—-Canvas的使用详解</a></p>
<hr>
<h3 id="Picasso-框架"><a href="#Picasso-框架" class="headerlink" title="Picasso 框架"></a>Picasso 框架</h3><p><a href="http://alight.sinaapp.com/?p=131" target="_blank" rel="external">Picasso 加载图片转换为圆角或圆形</a><br><a href="http://stackoverflow.com/questions/34721054/draw-bitmap-on-canvas-with-picasso" target="_blank" rel="external">Draw bitmap on canvas with Picasso</a></p>
<blockquote>
<p>Picasso onBitmapLoaded never called 的问题<br><a href="http://stackoverflow.com/questions/25975006/picasso-onbitmaploaded-never-called/36310327#36310327" target="_blank" rel="external">Picasso onBitmapLoaded never called</a><br><a href="http://www.hasibuan.me/2015/09/17/weak-reference-in-java-and-android/" target="_blank" rel="external">Weak Reference in Java and Android</a></p>
</blockquote>
<hr>
<h4 id="Android-Material-Design"><a href="#Android-Material-Design" class="headerlink" title="Android Material Design"></a>Android Material Design</h4><p><a href="https://github.com/chrisbanes/cheesesquare" target="_blank" rel="external">chrisbanes/cheesesquare</a><br><a href="http://www.ui.cn/detail/61157.html" target="_blank" rel="external">学习笔记:一起来了解 Android Design Support Library</a></p>
<hr>
<h4 id="Android-Toolbar"><a href="#Android-Toolbar" class="headerlink" title="Android Toolbar"></a>Android Toolbar</h4><p><a href="http://givemepass-blog.logdown.com/posts/292008-how-to-use-the-toolbar" target="_blank" rel="external">如何使用Toolbar(Actionbar)+DrawerLayout</a><br><a href="http://www.cnblogs.com/oyjt/p/4762640.html" target="_blank" rel="external">Android Toolbar样式定制详解</a></p>
<p><a href="http://blog.rhesoft.com/2015/03/30/tutorial-android-actionbar-with-material-design-and-search-field/" target="_blank" rel="external">搜索输入框 [Tutorial] Android ActionBar with Material Design and search field</a></p>
<p><a href="http://www.jianshu.com/p/0c2e56748cd9" target="_blank" rel="external">如何将DrawerLayout显示在ActionBar/Toolbar和status bar之间</a><br><a href="https://yanlu.me/android-4-4-translucent-system-barstatus-bar/" target="_blank" rel="external">Android 4.4 实现透明状态栏Translucent system bar(Status bar)</a></p>
<p><a href="http://blog.csdn.net/ys408973279/article/details/49994407" target="_blank" rel="external">Android使用fitsSystemWindows属性实现–状态栏【status_bar】各版本适配方案</a><br><a href="https://github.com/bboyfeiyu/android-tech-frontier/blob/master/issue-35/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BB%AC%E8%A6%81%E7%94%A8fitsSystemWindows.md" target="_blank" rel="external">我们为什么要用fitsSystemWindows?</a><br><a href="https://www.zhihu.com/question/40607390" target="_blank" rel="external">对于MIUI7,网易新闻客户端和知乎客户端是如何实现透明状态栏的?</a><br><a href="http://stormzhang.com/android/2015/08/16/boohee-toolbar/" target="_blank" rel="external">薄荷Toolbar(ActionBar)的适配方案</a></p>
<hr>
<hr>
<h4 id="Android-Design-SearchView"><a href="#Android-Design-SearchView" class="headerlink" title="Android Design SearchView"></a>Android Design SearchView</h4><p><a href="http://stackoverflow.com/questions/27556623/creating-a-searchview-that-looks-like-the-material-design-guidelines" target="_blank" rel="external">Creating a SearchView that looks like the material design guidelines</a><br><a href="https://gist.github.com/slightfoot/5514856" target="_blank" rel="external">slightfoot/SearchActivity.java</a></p>
<hr>
<h4 id="Android-CoordinatorLayout"><a href="#Android-CoordinatorLayout" class="headerlink" title="Android CoordinatorLayout"></a>Android CoordinatorLayout</h4><p><a href="http://blog.csdn.net/xyz_lmn/article/details/48055919" target="_blank" rel="external">android CoordinatorLayout使用</a><br><a href="http://stackoverflow.com/questions/31169137/inflating-appbarlayout-with-toolbar-tablayout" target="_blank" rel="external">Inflating AppBarLayout with Toolbar + TabLayout</a><br><a href="http://stackoverflow.com/questions/30680824/how-to-use-a-tablayout-with-toolbar-inside-collapsingtoolbarlayout" target="_blank" rel="external">How to use a TabLayout with Toolbar inside CollapsingToolbarLayout?</a></p>
<hr>
<h4 id="Android-Floating-Action-Bar"><a href="#Android-Floating-Action-Bar" class="headerlink" title="Android Floating Action Bar"></a>Android Floating Action Bar</h4><p><a href="http://guides.codepath.com/android/Floating-Action-Buttons#using-coordinatorlayout" target="_blank" rel="external">Floating Action Buttons</a></p>
<hr>
<hr>
<h4 id="Android-透明状态栏"><a href="#Android-透明状态栏" class="headerlink" title="Android 透明状态栏"></a>Android 透明状态栏</h4><p><a href="https://github.com/laobie/StatusBarUtil" target="_blank" rel="external">laobie/StatusBarUtil</a><br><a href="http://laobie.github.io/android/2016/03/27/statusbar-util.html" target="_blank" rel="external">Android 状态栏工具类(实现沉浸式状态栏/变色状态栏)</a></p>
<hr>
<h4 id="CardView"><a href="#CardView" class="headerlink" title="CardView"></a>CardView</h4><p><a href="http://www.jianshu.com/p/2982071a20c4" target="_blank" rel="external">CardView简述</a></p>
<hr>
<h4 id="Android-ViewPager…"><a href="#Android-ViewPager…" class="headerlink" title="Android ViewPager…"></a>Android ViewPager…</h4><p><a href="http://m.blog.csdn.net/blog/ITjianghuxiaoxiong/44938305" target="_blank" rel="external">巧解ViewPager滑动冲突</a></p>
<hr>
<h4 id="Android-RecyclerView…"><a href="#Android-RecyclerView…" class="headerlink" title="Android RecyclerView…"></a>Android RecyclerView…</h4><p><a href="http://blog.cgsdream.org/2015/06/11/recyclerview/" target="_blank" rel="external">RecyclerView使用详解</a><br><a href="http://frank-zhu.github.io/android/2015/02/25/android-recyclerview-part-2/" target="_blank" rel="external">RecyclerView使用详解 三</a><br><a href="http://yat3s.com/2015/09/21/RecyclerView/" target="_blank" rel="external">RecyclerView的使用技巧</a></p>
<p><a href="http://blog.iderzheng.com/first-date-with-recyclerview/" target="_blank" rel="external">RecyclerView体验简介</a><br><a href="http://yaohp.github.io/2016/01/22/RecyclerView%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97%E4%B9%8B%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A%E5%92%8C%E6%B7%BB%E5%8A%A0%E5%A4%B4%E9%83%A8%E5%B8%83%E5%B1%80/" target="_blank" rel="external">RecyclerView使用心得之加载更多和添加头部布局</a></p>
<hr>
<h4 id="Android-触摸事件"><a href="#Android-触摸事件" class="headerlink" title="Android 触摸事件"></a>Android 触摸事件</h4><p><a href="http://www.cnblogs.com/supersugar/archive/2012/08/08/2628602.html" target="_blank" rel="external">android自定义布局中的平滑移动</a><br><a href="http://blog.csdn.net/lonelyroamer/article/details/7560598" target="_blank" rel="external">滑轮控件研究四. VelocityTracker的简单研究</a><br><a href="http://blog.csdn.net/bigconvience/article/details/26391743" target="_blank" rel="external">Android的Touch系统简介(一)</a><br><a href="http://blog.csdn.net/android_tutor/article/details/7193090" target="_blank" rel="external">两分钟彻底让你明白Android中onInterceptTouchEvent与onTouchEvent(图文)!</a><br><a href="https://github.com/CharonChui/AndroidNote/blob/master/Android%E5%8A%A0%E5%BC%BA/Android%20Touch%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E8%AF%A6%E8%A7%A3.md" target="_blank" rel="external">Android Touch事件分发详解</a></p>
<p><a href="http://www.jianshu.com/p/ce3eb03abb5a" target="_blank" rel="external">Android触摸事件传递(上)</a><br><a href="http://www.jianshu.com/p/a4bb029c0b7c" target="_blank" rel="external">Android触摸事件传递(下)</a></p>
<p><a href="http://www.jianshu.com/p/a2185e4b1b53" target="_blank" rel="external">android 事件处理机制总结,ScrollView ViewPager ListView GridView嵌套小结</a><br><a href="http://pingguohe.net/2016/01/16/view-event.html" target="_blank" rel="external">Android事件传递小结</a><br><a href="http://m.blog.csdn.net/article/details?id=41084921" target="_blank" rel="external">android事件拦截处理机制详解</a></p>
<hr>
<p><a href="http://download.androidhive.info/dashboard" target="_blank" rel="external">Android 开发设计相关blog及源码</a></p>
<p><a href="http://www.androidhive.info/2014/10/android-building-group-chat-app-using-sockets-part-1/" target="_blank" rel="external">Android 开发IM聊天Android Building Group Chat App using Sockets – Part 1</a></p>
<h4 id="Android-下拉刷新"><a href="#Android-下拉刷新" class="headerlink" title="Android 下拉刷新"></a>Android 下拉刷新</h4><p><a href="https://github.com/stormzhang/SwipeRefreshLayoutDemo" target="_blank" rel="external">stormzhang/SwipeRefreshLayoutDemo</a><br><a href="http://www.androidhive.info/2015/05/android-swipe-down-to-refresh-listview-tutorial/" target="_blank" rel="external">Android Swipe Down to Refresh ListView Tutorial</a><br><a href="https://github.com/OrangeGangsters/SwipyRefreshLayout" target="_blank" rel="external">OrangeGangsters/SwipyRefreshLayout</a></p>
<p><a href="https://yanlu.me/recyclerview_pull_up_load_more/" target="_blank" rel="external">RecyclerView的上拉加载更多</a></p>
<p><a href="http://www.cnblogs.com/boy1025/p/4635490.html" target="_blank" rel="external">Android程序设计-RecyclerView的使用</a><br><a href="http://codentrick.com/how-to-implement-load-more-recyclerview-with-progressbar-at-bottom/" target="_blank" rel="external">How to implement Load More RecyclerView with progressbar at bottom</a><br><a href="http://cloay.com/blog/2014/07/23/li-yong-swiperefreshlayouthe-loadmorelistviewshi-xian-xia-la-shua-xin-he-shang-la-jia-zai-geng-duo/" target="_blank" rel="external">利用SwipeRefreshLayout和LoadMoreListView实现下拉刷新和上拉加载更多</a></p>
<hr>
<h4 id="butterknife"><a href="#butterknife" class="headerlink" title="butterknife"></a>butterknife</h4><p><a href="http://www.aiuxian.com/article/p-2362256.html" target="_blank" rel="external">关于开源项目ButterKnife的使用心得</a><br><a href="http://www.cnblogs.com/mengdd/archive/2015/06/23/4595973.html" target="_blank" rel="external">ButterKnife基本使用</a></p>
<hr>
<h3 id="Android三种数据存储方式"><a href="#Android三种数据存储方式" class="headerlink" title="Android三种数据存储方式"></a>Android三种数据存储方式</h3><p><a href="https://www.zybuluo.com/excavator/note/104074" target="_blank" rel="external">Android三种数据存储方式</a></p>
<hr>
<hr>
<h4 id="自定义-View"><a href="#自定义-View" class="headerlink" title="自定义 View"></a>自定义 View</h4><p><a href="http://www.jianshu.com/p/84cee705b0d3" target="_blank" rel="external">教你搞定Android自定义View</a><br><a href="http://www.jianshu.com/p/138b98095778" target="_blank" rel="external">教你搞定Android自定义ViewGroup</a></p>
<hr>
<h4 id="Android-应用使用自定义字体"><a href="#Android-应用使用自定义字体" class="headerlink" title="Android 应用使用自定义字体"></a>Android 应用使用自定义字体</h4><p><a href="http://stackoverflow.com/questions/2711858/is-it-possible-to-set-font-for-entire-application/16883281#16883281" target="_blank" rel="external">Is it possible to set font for entire Application?</a><br><a href="https://github.com/chrisjenx/Calligraphy" target="_blank" rel="external">GitHub chrisjenx/Calligraphy</a><br><a href="https://github.com/vsvankhede/easyfonts" target="_blank" rel="external">GitHub vsvankhede/easyfonts</a><br><a href="https://github.com/shellum/fontView" target="_blank" rel="external">GitHub shellum/fontView</a><br><a href="http://blog.goyello.com/2014/08/01/how-to-use-custom-fonts-in-android-apps-and-not-get-fat-3/" target="_blank" rel="external">How to use custom fonts in Android apps (and not get fat)</a></p>
<h5 id="使用-Calligraphy-自定义字体"><a href="#使用-Calligraphy-自定义字体" class="headerlink" title="使用 Calligraphy 自定义字体"></a>使用 Calligraphy 自定义字体</h5><p>引入依赖</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span> <span class="string">'uk.co.chrisjenx:calligraphy:2.1.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 Application 中添加配置项</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Calligraphy 自定义字体</span></span><br><span class="line">CalligraphyConfig.initDefault(<span class="keyword">new</span> CalligraphyConfig.Builder()</span><br><span class="line">        .setDefaultFontPath(<span class="string">"carbon/FZLT.ttf"</span>)</span><br><span class="line">        .setFontAttrId(R.attr.fontPath)</span><br><span class="line">        <span class="comment">//.addCustomViewWithSetTypeface(CustomViewWithTypefaceSupport.class)</span></span><br><span class="line">        <span class="comment">//.addCustomStyle(TextField.class, R.attr.textFieldStyle)</span></span><br><span class="line">        .build());</span><br></pre></td></tr></table></figure>
<p>在需要使用自定义字体的 Activity 或自定义基类 BaseActivity 中复写以下方法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">attachBaseContext</span><span class="params">(Context newBase)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.attachBaseContext(CalligraphyContextWrapper.wrap(newBase));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>于是全局的程序应该都是使用自定义字体渲染了<br>注意事项:动态加载的文字没有被自动渲染成自定义字体,需要在加载后手动设置;引入自定义字体后的程序性能可能会受到影响,继续研究</p>
<hr>
<h3 id="Android-Java8"><a href="#Android-Java8" class="headerlink" title="Android Java8"></a>Android Java8</h3><p><a href="http://www.jianshu.com/p/8c11262fcb41" target="_blank" rel="external">Java 8+Android M新特性总结(简略版)</a><br><a href="http://blog.csdn.net/wbwjx/article/details/50513602" target="_blank" rel="external">Android Studio 中使用Java 8 特性</a></p>
<hr>
<h4 id="开源表情库"><a href="#开源表情库" class="headerlink" title="开源表情库"></a>开源表情库</h4><p><a href="https://github.com/rockerhieu/emojicon" target="_blank" rel="external">rockerhieu/emojicon</a><br><a href="https://github.com/arvida/emoji-cheat-sheet.com" target="_blank" rel="external">arvida/emoji-cheat-sheet.com</a></p>
<hr>
<h3 id="不错的开源库"><a href="#不错的开源库" class="headerlink" title="不错的开源库"></a>不错的开源库</h3><p><a href="https://github.com/Yalantis/Phoenix" target="_blank" rel="external">Yalantis/Phoenix</a><br><a href="https://github.com/Yalantis/Taurus" target="_blank" rel="external">Yalantis/Taurus</a></p>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><p><a href="http://www.androidhive.info/2015/09/android-material-design-working-with-tabs/" target="_blank" rel="external">Android Material Design working with Tabs</a><br><a href="http://songchenwen.com/tech/2015/01/28/android-trust-self-signed-ssl-certificate/" target="_blank" rel="external">Android 开发中如何信任自签名 Https 证书</a></p>
<h3 id="专业收藏开发者相关博客"><a href="#专业收藏开发者相关博客" class="headerlink" title="专业收藏开发者相关博客"></a>专业收藏开发者相关博客</h3><p><a href="http://ginsmile.github.io/" target="_blank" rel="external">Gin’s Blog</a><br><a href="http://chenfuduo.me/2015/11/06/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%8D%81%E5%A4%A7%E7%AE%97%E6%B3%95/" target="_blank" rel="external">机器学习十大算法</a></p>
<pre><code>C4.5算法
Kmeans算法
朴素贝叶斯算法
K最近邻分类算法(KNN)
EM最大期望算法
PageRank算法
AdaBoost
Apriori算法
SVM支持向量机
CART分类与回归树
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Android/EventBus" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/10/Android/EventBus/" class="article-date">
      <time datetime="2016-01-10T11:41:31.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Android/EventBus/">Title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Android之EventBus的使用"><a href="#Android之EventBus的使用" class="headerlink" title="Android之EventBus的使用"></a>Android之EventBus的使用</h3><h4 id="EventBus是一款针对Android优化的发布-订阅事件总线"><a href="#EventBus是一款针对Android优化的发布-订阅事件总线" class="headerlink" title="EventBus是一款针对Android优化的发布/订阅事件总线."></a>EventBus是一款针对Android优化的发布/订阅事件总线.</h4><blockquote>
<p>主要功能是替代(Intent,Handler,BroadCast)在(Fragment,Activity,Service)线程之间传递消息.<br>优点是开销小,代码更优雅.以及将发送者和接收者解耦.<br>当在开发一些庞大的的项目时,模块比较多,这个时候为了避免耦合度和保证 APP 的效率<br>会用到 EventBus 等类似的事件总线处理模型.<br>这样可以简化一些数据传输操作,保证APP的简洁,做到高内聚. 低耦合.</p>
</blockquote>
<p>参考<br><a href="http://www.nljb.net/default/Android%E4%B9%8BEventBus%E7%9A%84%E4%BD%BF%E7%94%A8/" target="_blank" rel="external">Android之EventBus的使用</a><br><a href="http://blog.saymagic.cn/2014/10/09/EventBus%E8%AF%A6%E8%A7%A3.html" target="_blank" rel="external">EventBus使用</a><br><a href="http://vinoyang.com/2015/06/02/Google-Guava-EventBus%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB/" target="_blank" rel="external">Google-Guava-EventBus源码解读</a><br><a href="http://www.pocketdigi.com/20131227/1235.html" target="_blank" rel="external">Android开发 使用EventBus管理事件传递消息</a><br><a href="http://www.cnblogs.com/qianxudetianxia/p/4216949.html" target="_blank" rel="external">Android学习系列(43)–使用事件总线框架EventBus和Otto</a><br><a href="http://frodoking.github.io/2015/03/30/android-eventbus-otto-analysis/" target="_blank" rel="external">事件总线 —— otto的bus和eventbus对比分析</a><br><a href="http://www.androidchina.net/2328.html" target="_blank" rel="external">Android事件总线还能怎么玩?-AndroidEventBus</a><br><a href="http://www.cnblogs.com/angeldevil/p/3715934.html" target="_blank" rel="external">快速Android开发系列通信篇之EventBus</a><br><a href="http://blog.zhaiyifan.cn/2015/08/17/EventBus:otto:LocalBroadcast%E7%9A%84%E9%80%89%E6%8B%A9/" target="_blank" rel="external">EventBus, otto, LocalBroadcast的选择</a></p>
<p>EventBus GitHub: <a href="https://github.com/greenrobot/EventBus" target="_blank" rel="external">https://github.com/greenrobot/EventBus</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gradle: compile 'de.greenrobot:eventbus:2.4.0'</span><br></pre></td></tr></table></figure>
<h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 分订阅,注册,发布,取消注册</span></span><br><span class="line">EventBus.getDefault().register(<span class="keyword">this</span>);</span><br><span class="line">EventBus.getDefault().register(<span class="keyword">new</span> MyClass());</span><br><span class="line"><span class="comment">// 三个参数分别是:消息订阅者(接收者),接收方法名,事件类</span></span><br><span class="line">EventBus.getDefault().register(<span class="keyword">this</span>, <span class="string">"setTextA"</span>, SetTextAEvent.class);</span><br><span class="line"><span class="comment">// 取消注册</span></span><br><span class="line">EventBus.getDefault().unregister(<span class="keyword">this</span>);</span><br><span class="line">EventBus.getDefault().unregister(<span class="keyword">new</span> MyClass());</span><br><span class="line"><span class="comment">// 订阅处理数据</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> onEventMainThread&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEvent</span><span class="params">(AnyEventType event)</span></span>&#123;&#125;</span><br><span class="line">onEventPostThread, onEventBackgroundThread, onEventAsync</span><br><span class="line"><span class="comment">// 发布</span></span><br><span class="line">EventBus.getDefault().postSticky(<span class="keyword">new</span> SecondActivityEvent(<span class="string">"Message From SecondActivity"</span>));</span><br><span class="line">EventBus.getDefault().post(<span class="keyword">new</span> ChangelmgEvent(<span class="number">1</span>));</span><br><span class="line">Event</span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Event</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    <span class="comment">// 注册</span></span><br><span class="line">    EventBus.getDefault().register(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 发送</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">postData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String str = <span class="string">"Hello World"</span>;</span><br><span class="line">        <span class="comment">// 发送数据,可以是一个类型或者一个类</span></span><br><span class="line">        EventBus.getDefault().post(str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 接收</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEvent</span><span class="params">(String str)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 接收</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEventMainThread</span><span class="params">(String str)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 接收</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEventPostThread</span><span class="params">(String str)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 接收</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEventBackgroundThread</span><span class="params">(String str)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 接收</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEventAsync</span><span class="params">(String str)</span> </span>&#123;&#125;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        <span class="comment">// 取消注册</span></span><br><span class="line">        EventBus.getDefault().unregister(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><ol>
<li>onEvent</li>
<li>onEventMainThread</li>
<li>onEventBackgroundThread</li>
<li>onEventAsync</li>
</ol>
<p>这四种订阅函数都是使用onEvent开头的,它们的功能稍有不同,在介绍不同之前先介绍两个概念:<br>告知观察者事件发生时通过EventBus.post函数实现,这个过程叫做事件的发布观察者被告知事件发生叫做事件的接收,是通过下面的订阅函数实现的:</p>
<h5 id="onEvent"><a href="#onEvent" class="headerlink" title="onEvent:"></a>onEvent:</h5><blockquote>
<p>如果使用onEvent作为订阅函数,那么该事件在哪个线程发布出来的,onEvent就会在这个线程中运行<br>    也就是说发布事件和接收事件线程在同一个线程.<br>    使用这个方法时,在onEvent方法中不能执行耗时操作,如果执行耗时操作容易导致事件分发延迟.</p>
</blockquote>
<h5 id="onEventMainThread"><a href="#onEventMainThread" class="headerlink" title="onEventMainThread:"></a>onEventMainThread:</h5><blockquote>
<p>如果使用onEventMainThread作为订阅函数,那么不论事件是在哪个线程中发布出来的,onEventMainThread都会在UI线程中执行,比如开启子线程远程加载数据后更新UI,使用其它订阅函数(onEventBackground)会报错</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android.view.ViewRootImpl<span class="variable">$CalledFromWrongThreadException</span>: Only the original thread that created a view hierarchy can touch its views.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>接收事件就会在UI线程中运行,这个在Android中是非常有用的,因为在Android中只能在UI线程中更新UI,所以在onEvnetMainThread方法中是不能执行耗时操作的.</p>
</blockquote>
<h5 id="onEventBackground"><a href="#onEventBackground" class="headerlink" title="onEventBackground:"></a>onEventBackground:</h5><blockquote>
<p>如果使用onEventBackgrond作为订阅函数,那么如果事件是在UI线程中发布出来的<br>    那么onEventBackground就会在子线程中运行,如果事件本来就是子线程中发布出来的<br>    那么onEventBackground函数直接在该子线程中执行.</p>
</blockquote>
<h5 id="onEventAsync"><a href="#onEventAsync" class="headerlink" title="onEventAsync:"></a>onEventAsync:</h5><blockquote>
<p>使用这个函数作为订阅函数,那么无论事件在哪个线程发布,都会创建新的子线程在执行onEventAsync.</p>
</blockquote>
<h5 id="使用重载机制进行收发不同对象"><a href="#使用重载机制进行收发不同对象" class="headerlink" title="使用重载机制进行收发不同对象"></a>使用重载机制进行收发不同对象</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEventMainThread</span><span class="params">(FirstEvent event)</span> </span>&#123;  </span><br><span class="line">    Log.d(<span class="string">"harvic"</span>, <span class="string">"onEventMainThread收到了消息:"</span> + event.getMsg());  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEventMainThread</span><span class="params">(SecondEvent event)</span> </span>&#123;  </span><br><span class="line">    Log.d(<span class="string">"harvic"</span>, <span class="string">"onEventMainThread收到了消息:"</span> + event.getMsg());  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEvent</span><span class="params">(ThirdEvent event)</span> </span>&#123;  </span><br><span class="line">    Log.d(<span class="string">"harvic"</span>, <span class="string">"OnEvent收到了消息:"</span> + event.getMsg());  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Android/DebugAndroidStethoAppWithChrome" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/10/Android/DebugAndroidStethoAppWithChrome/" class="article-date">
      <time datetime="2016-01-10T11:41:31.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Android/DebugAndroidStethoAppWithChrome/">Title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="使用Chrome来调试你的Android-App"><a href="#使用Chrome来调试你的Android-App" class="headerlink" title="使用Chrome来调试你的Android App"></a>使用Chrome来调试你的Android App</h3><p><a href="https://github.com/facebook/stetho" target="_blank" rel="external">Github</a><br><a href="http://stormzhang.com/android/2015/03/05/android-debug-use-chrome/" target="_blank" rel="external">使用Chrome来调试你的Android App</a><br><a href="http://tech.luffyjet.com/2015/04/08/facebook-stetho-okhttp-study/" target="_blank" rel="external">Facebook Stetho 使用学习</a><br><a href="http://www.5uzh.com/view.aspx?kn=50021483" target="_blank" rel="external">Android调试工具 stetho</a></p>
<p>#### </p>
<blockquote>
<p>添加依赖</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'com.facebook.stetho:stetho:1.2.0'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//调试 HttpURLConnection 建立的网络请求</span></span><br><span class="line">compile <span class="string">'com.facebook.stetho:stetho-urlconnection:1.2.0'</span></span><br><span class="line"><span class="comment">//调试 OKHttp 建立的网络请求</span></span><br><span class="line">compile <span class="string">'com.facebook.stetho:stetho-okhttp:1.2.0'</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在Application中启动配置</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Stetho.initialize(Stetho.newInitializerBuilder(<span class="keyword">this</span>)</span><br><span class="line">    .enableDumpapp(Stetho.defaultDumperPluginsProvider(<span class="keyword">this</span>))</span><br><span class="line">    .enableWebKitInspector(Stetho.defaultInspectorModulesProvider(<span class="keyword">this</span>))</span><br><span class="line">    .build());</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用HttpUrlConnection调试网络请求,导入官方的一个网络请求类 Networker [stetho/stetho-sample/src/main/java/com/facebook/stetho/sample/Networker.java]</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Post请求</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sendHUCTPost</span><span class="params">(Context context, String url, Map&lt;String, String&gt; params)</span> </span>&#123;</span><br><span class="line">    PrintWriter out = <span class="keyword">null</span>;</span><br><span class="line">    BufferedReader in = <span class="keyword">null</span>;</span><br><span class="line">    String response = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        URL realUrl = <span class="keyword">new</span> URL(url);</span><br><span class="line">        <span class="comment">// 打开和URL之间的连接</span></span><br><span class="line">        <span class="comment">//HttpURLConnection</span></span><br><span class="line"></span><br><span class="line">        StringBuffer requestParams = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">if</span> (params != <span class="keyword">null</span> &amp;&amp; params.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//conn.setDoOutput(true); // true indicates POST request</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// creates the params string, encode them using URLEncoder</span></span><br><span class="line">            Iterator&lt;String&gt; paramIterator = params.keySet().iterator();</span><br><span class="line">            <span class="keyword">while</span> (paramIterator.hasNext()) &#123;</span><br><span class="line">                String key = paramIterator.next();</span><br><span class="line">                String value = params.get(key);</span><br><span class="line">                requestParams.append(URLEncoder.encode(key, <span class="string">"UTF-8"</span>));</span><br><span class="line">                <span class="comment">//判断一下,防止传空值 null 程序[URLEncoder.encode(value, "UTF-8"]意外崩溃,不能用 value.isEmpty() 判断是否已赋值</span></span><br><span class="line">                <span class="keyword">if</span> (value != <span class="keyword">null</span>)</span><br><span class="line">                    requestParams.append(<span class="string">"="</span>).append(URLEncoder.encode(value, <span class="string">"UTF-8"</span>));</span><br><span class="line">                requestParams.append(<span class="string">"&amp;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// sends POST data</span></span><br><span class="line"><span class="comment">//                OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());</span></span><br><span class="line"><span class="comment">//                writer.write(requestParams.toString());</span></span><br><span class="line"><span class="comment">//                writer.flush();</span></span><br><span class="line">            <span class="comment">// 获取URLConnection对象对应的输出流</span></span><br><span class="line"><span class="comment">//                out = new PrintWriter(conn.getOutputStream());</span></span><br><span class="line"><span class="comment">//                // 发送请求参数</span></span><br><span class="line"><span class="comment">//                out.print(requestParams);</span></span><br><span class="line"><span class="comment">//                // flush输出流的缓冲</span></span><br><span class="line"><span class="comment">//                out.flush();</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//byte[] postBytes = requestXML.getBytes("UTF-8");</span></span><br><span class="line">        <span class="comment">//byte[] postBytes = new byte[]&#123; (byte) 0x65, (byte)0x10, (byte)0xf3, (byte)0x29&#125;;</span></span><br><span class="line">        <span class="comment">// 将 StringBuffer 转换为 byte[] 数组 - 参考 http://stackoverflow.com/questions/8005327/convert-a-stringbuffer-to-a-byte-array-in-java</span></span><br><span class="line">        <span class="keyword">byte</span>[] postBytes = String.valueOf(requestParams).getBytes();</span><br><span class="line">        Networker.HttpRequest request = Networker.HttpRequest.newBuilder()</span><br><span class="line">                .friendlyName(<span class="string">"ShangYun"</span>)</span><br><span class="line">                .method(Networker.HttpMethod.POST)</span><br><span class="line">                .url(url)</span><br><span class="line">                .body(postBytes)</span><br><span class="line">                .build();</span><br><span class="line">        Networker.get().submit(request, mStoreRssResponse);</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Get请求</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendOneReq</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Networker.HttpRequest request = Networker.HttpRequest.newBuilder()</span><br><span class="line">            .friendlyName(<span class="string">"Bai Du"</span>)</span><br><span class="line">            .method(Networker.HttpMethod.GET)</span><br><span class="line">            .url(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line">            .build();</span><br><span class="line">    Networker.get().submit(request, mStoreRssResponse);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Networker.Callback mStoreRssResponse = <span class="keyword">new</span> Networker.Callback() &#123;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(Networker.HttpResponse result)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (result.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">            String page22222=<span class="keyword">new</span> String(result.body);</span><br><span class="line">            System.out.println(<span class="string">"page22222 : "</span>+page22222);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"result.statusCode is not 200"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(IOException e)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"onFailure"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>最后在Chrome 浏览器输入 <a href="chrome://inspect/#devices" target="_blank" rel="external">chrome://inspect/#devices</a> 调试</p>
</blockquote>
<p>参考列表<br><a href="http://stackoverflow.com/questions/12844968/http-post-body-lost-spuriously-httpurlconnection-jetty" target="_blank" rel="external">HTTP post body lost spuriously (HttpURLConnection &amp; Jetty)</a><br><a href="http://stackoverflow.com/questions/17180645/post-byte-array-in-parameter" target="_blank" rel="external">Post byte array in parameter</a><br><a href="http://stackoverflow.com/questions/8005327/convert-a-stringbuffer-to-a-byte-array-in-java" target="_blank" rel="external">Convert a StringBuffer to a byte Array in Java</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Android/DebugAndroidLog" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/10/Android/DebugAndroidLog/" class="article-date">
      <time datetime="2016-01-10T11:41:31.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Android/DebugAndroidLog/">Title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Android-调试工具"><a href="#Android-调试工具" class="headerlink" title="Android 调试工具"></a>Android 调试工具</h3><p><a href="http://tech.luffyjet.com/2015/04/10/android-debug-tools-hugo-scalpel-timber/" target="_blank" rel="external">Android调试自测工具01 (Hugo. Timber. Scalpel)</a><br><a href="http://stackoverflow.com/questions/2446248/remove-all-debug-logging-calls-before-publishing-are-there-tools-to-do-this" target="_blank" rel="external">发布版包关闭所有log日志 Remove all debug logging calls before publishing: are there tools to do this?</a><br><a href="http://bugly.qq.com/blog/?p=131" target="_blank" rel="external">【团队分享】刀锋铁骑:常见Android Native崩溃及错误原因</a></p>
<h4 id="使用-CrashWoodpecker-捕捉开发过程中运行时崩溃异常"><a href="#使用-CrashWoodpecker-捕捉开发过程中运行时崩溃异常" class="headerlink" title="使用 CrashWoodpecker 捕捉开发过程中运行时崩溃异常"></a>使用 CrashWoodpecker 捕捉开发过程中运行时崩溃异常</h4><p><a href="http://drakeet.me/crashwoodpecker" target="_blank" rel="external">比 Logcat 更加美观易用的异常信息接收器: CrashWoodpecker</a><br><a href="https://github.com/square/leakcanary" target="_blank" rel="external">square/leakcanary</a></p>
<h4 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常"></a>捕获异常</h4><p><a href="http://blog.csdn.net/ryantang03/article/details/9336295" target="_blank" rel="external">Android应用崩溃后异常捕获并重启</a><br><a href="https://developers.google.com/analytics/devguides/collection/android/v4/exceptions?hl=zh-cn" target="_blank" rel="external">崩溃和异常 - Android SDK v4</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Android/Conversations.IM" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/10/Android/Conversations.IM/" class="article-date">
      <time datetime="2016-01-10T11:41:31.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Android/Conversations.IM/">Title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Conversations-相关"><a href="#Conversations-相关" class="headerlink" title="Conversations 相关"></a>Conversations 相关</h3><p><a href="http://conversations.im" target="_blank" rel="external">Conversations.im 官网</a><br><a href="https://github.com/siacs/Conversations" target="_blank" rel="external">GitHub - Conversations</a></p>
<p>分享位置插件<br><a href="https://github.com/siacs/ShareLocationPlugin" target="_blank" rel="external">siacs/ShareLocationPlugin</a><br><a href="https://github.com/kriztan/OpenShareLocationPlugin" target="_blank" rel="external">kriztan/OpenShareLocationPlugin</a></p>
<h3 id="Conversation-迁移指南-05-06-v1-12-1"><a href="#Conversation-迁移指南-05-06-v1-12-1" class="headerlink" title="Conversation 迁移指南 05-06 v1.12.1"></a>Conversation 迁移指南 05-06 v1.12.1</h3><ul>
<li>将 Conversation/lib/MemorizingTrustManager 复制到本项目 ./libs/ 下,注意在项目依赖加入模块</li>
<li>将 C:\Users\yafei\AppDeveloperWorkspace\Android\Conversations-master\src\ 下的 [playstore free] 文件夹拷贝到同等级目录下覆盖</li>
<li>复制 Conversations 项目下 build.gradle 的依赖项,修改为如下部分添加到 项目 CoamAndroid/app/build.gradle 下,修改参见 CoamAndroid/app/build.gradle 中配置</li>
<li>复制 Conversation/src/main/jave 下的整个项目文件夹结构 (eu.siacs.conversations) 到 本项目 CoamAndroid/app/main/src 下,修改部分为</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">将 <span class="attr_selector">[eu.siacs.conversations.R;]</span> 全部替换为 <span class="attr_selector">[import com.coam.shangyun.R;]</span></span><br><span class="line">修改 <span class="tag">eu</span><span class="class">.siacs</span><span class="class">.conversations</span><span class="class">.ui</span><span class="class">.widget</span><span class="class">.Switch</span> 继承自 <span class="tag">com</span><span class="class">.coam</span><span class="class">.plugins</span><span class="class">.switchbutton</span><span class="class">.SwitchButton</span></span><br></pre></td></tr></table></figure>
<ul>
<li>将 [Conversation/src/main/java/AndroidManifest.xml] 下的 application 迁移到本项目 [CoamAndroid/app/src/main/java/AndroidManifest.xml] ,修改部分参见 [CoamAndroid/app/src/main/java/AndroidManifest.xml]</li>
</ul>
<h3 id="Conversation-src-main-res-下的复制"><a href="#Conversation-src-main-res-下的复制" class="headerlink" title="Conversation/src/main/res/* 下的复制"></a>Conversation/src/main/res/* 下的复制</h3><ul>
<li>将 [Conversation/src/main/res/drawable<em>] 全部复制到本项目相应文件夹下 [CoamAndroid/app/src/main/res/drawable</em>]</li>
<li>将 [Conversation/src/main/res/xml/<em>] 目录文件全部复制到本项目相应文件夹下 [CoamAndroid/app/src/main/res/xml/</em>]</li>
<li>将 [Conversation/src/main/res/raw/<em>] 目录文件全部复制到本项目相应文件夹下 [CoamAndroid/app/src/main/res/raw/</em>]</li>
<li>将 [Conversation/src/main/res/layout/<em>] 目录文件全部添加 conversations_ 前缀 并复制到本项目相应文件夹下 [CoamAndroid/app/src/main/res/layout/</em>]</li>
<li>将 [Conversation/src/main/res/menu/<em>] 目录文件全部添加 conversations_ 前缀 并复制到本项目相应文件夹下 [CoamAndroid/app/src/main/res/menu/</em>]</li>
<li>将 [Conversation/src/main/res/values/<em>] 目录文件全部添加 conversations_ 前缀 并复制到本项目相应文件夹下 [CoamAndroid/app/src/main/res/values/</em>] </li>
<li>将 [Conversation/src/main/res/values-<em>] 目录文件全部复制到本项目相应文件夹下 [CoamAndroid/app/src/main/res/values-</em>],其中与本项目有冲突部分 values-v21/dimens.xml 和 values-v21/themes.xml 前面添加 conversations_ 前缀</li>
</ul>
<h4 id="以上总结"><a href="#以上总结" class="headerlink" title="以上总结:"></a>以上总结:</h4><p>1.将 Conversation/src/main/res/ 下的所有除了 [layout layout-w945dp menu values values-v21 values-w360dp values-w384dp values-w585dp values-w945dp] 三个文件夹外,全部全盘复制到 Conversation/src/main/res/<em> 下<br>2.[layout layout-w945dp menu values values-v21 values-w360dp values-w384dp values-w585dp values-w945dp] 三个文件夹下的所有文件前面统一添加 conversations_ 前缀[通过Python脚本程序 ConversationsMigrate.py],拷贝到 Conversation/src/main/res/</em> 下</p>
<h4 id="以上修改总结-最终方案"><a href="#以上修改总结-最终方案" class="headerlink" title="以上修改总结,最终方案:"></a>以上修改总结,最终方案:</h4><p>1.将 Conversation/src/main/res/ 下的所有除了 [drawable-hdpi drawable-mdpi drawable-xhdpi drawable-xxhdpi drawable-xxxhdpi] 几个文件夹外,<br>    所有文件夹的子文件前面统一添加 conversations_ 前缀[通过Python脚本程序 ConversationsMigrate.py],拷贝到 Conversation/src/main/res/* 下</p>
<h4 id="复制-app-src-playstore-java-eu-siacs-conversations-services-下的三个文件-InstanceIdService-java-PushManagementService-java-PushMessageReceiver-java-到-app-src-main-java-eu-siacs-conversations-services-下"><a href="#复制-app-src-playstore-java-eu-siacs-conversations-services-下的三个文件-InstanceIdService-java-PushManagementService-java-PushMessageReceiver-java-到-app-src-main-java-eu-siacs-conversations-services-下" class="headerlink" title="复制 app\src\playstore\java\eu\siacs\conversations\services* 下的三个文件 [InstanceIdService.java PushManagementService.java PushMessageReceiver.java] 到 app\src\main\java\eu\siacs\conversations\services* 下"></a>复制 app\src\playstore\java\eu\siacs\conversations\services* 下的三个文件 [InstanceIdService.java PushManagementService.java PushMessageReceiver.java] 到 app\src\main\java\eu\siacs\conversations\services* 下</h4><ul>
<li>修改部分</li>
</ul>
<p>将 conversations_styles.xml 中以下样式注释掉哦</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="title">style</span> <span class="attribute">name</span>=<span class="value">"MD"</span>&gt;</span><span class="css"></span><br><span class="line">&lt;!<span class="tag">--</span>        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">animationVelocity</span>"&gt;6&lt;/<span class="tag">item</span>&gt;</span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">insetBottom</span>"&gt;16<span class="tag">dp</span>&lt;/<span class="tag">item</span>&gt;</span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">insetTop</span>"&gt;16<span class="tag">dp</span>&lt;/<span class="tag">item</span>&gt;</span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">insetLeft</span>"&gt;16<span class="tag">dp</span>&lt;/<span class="tag">item</span>&gt;</span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">insetRight</span>"&gt;16<span class="tag">dp</span>&lt;/<span class="tag">item</span>&gt;</span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">measureFactor</span>"&gt;1<span class="class">.4</span>&lt;/<span class="tag">item</span>&gt;</span><br><span class="line">        &lt;<span class="tag">item</span> <span class="tag">name</span>="<span class="tag">offDrawable</span>"&gt;<span class="at_rule">@<span class="keyword">drawable/switch_back_off&lt;/item&gt;</span></span><br><span class="line">        &lt;item name=<span class="string">"onDrawable"</span>&gt;@drawable/switch_back_on&lt;/item&gt;</span><br><span class="line">        &lt;item name=<span class="string">"thumbDrawable"</span>&gt;@drawable/switch_thumb&lt;/item&gt;</span><br><span class="line">        &lt;item name=<span class="string">"thumb_margin"</span>&gt;-<span class="number">17</span>dp&lt;/item&gt;</span><br><span class="line">        &lt;item name=<span class="string">"android:padding"</span>&gt;<span class="number">16</span>dp&lt;/item&gt;--&gt;</span><br><span class="line">    </span></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>ui/ConversationAdapter.java Line 55</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//swipeableItem.setBackgroundColor(c);</span></span><br><span class="line">swipeableItem.setBackgroundColor(ContextCompat.getColor(activity, c));</span><br></pre></td></tr></table></figure>
</li>
<li><p>ui/XmppActivity.java Line 733</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//trustToggle.setChecked(trust.trusted(), false);</span></span><br><span class="line">trustToggle.setChecked(trust.trusted());</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="Telegram-相关"><a href="#Telegram-相关" class="headerlink" title="Telegram 相关"></a>Telegram 相关</h3><p><a href="https://my.telegram.org/apps" target="_blank" rel="external">https://my.telegram.org</a><br><a href="https://developers.google.com/mobile/add?platform=android&amp;cntapi=gcm&amp;cntapp=Default%20Demo%20App&amp;cntpkg=gcm.play.android.samples.com.gcmquickstart&amp;cnturl=https:%2F%2Fdevelopers.google.com%2Fcloud-messaging%2Fandroid%2Fstart%3Fconfigured%3Dtrue&amp;cntlbl=Continue%20with%20Try%20Cloud%20Messaging" target="_blank" rel="external">google-services.json</a></p>
<p><a href="https://github.com/DrKLO/Telegram" target="_blank" rel="external">DrKLO/Telegram</a><br><a href="http://stackoverflow.com/questions/33765946/android-telegram-app-java-lang-unsatisfiedlinkerror-no-implementation-found" target="_blank" rel="external">Android Telegram App –&gt; java.lang.UnsatisfiedLinkError: No implementation found for void</a><br><a href="http://stackoverflow.com/questions/34626824/telegram-ndk-build-command-not-found" target="_blank" rel="external">Telegram NDK build : Command not found</a><br><a href="http://developer.android.com/intl/es/ndk/downloads/index.html" target="_blank" rel="external">NDK Downloads</a><br><a href="http://stackoverflow.com/questions/34745704/how-to-compile-telegram-jni-folder" target="_blank" rel="external">How to compile telegram jni folder</a></p>
<p><a href="http://dove.tinfinite.com/" target="_blank" rel="external">Dove - 专为群组而建</a><br><a href="https://github.com/tinfinite/dove-android" target="_blank" rel="external">tinfinite/dove-android</a><br><a href="http://fir.im/Dove" target="_blank" rel="external">Dove</a><br><a href="https://www.zhihu.com/question/29990596" target="_blank" rel="external">爲甚麼李笑來的新項目「Dove」基於 GPL v2 證書的「Telegram」,卻可以不讓用戶獲得它的源代碼?</a></p>
<blockquote>
<p>编译 jni 的 so 文件</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">edit C:\cygwin64\home\yafei\.bashrc</span><br><span class="line">add <span class="built_in">export</span> ndkbuild=/cygdrive/C/TDDownload/android-ndk-r11b-windows-x86_64/android-ndk-r11b/ndk-build.cmd</span><br><span class="line">open Cygwin64 cmd</span><br><span class="line"><span class="built_in">cd</span> /cygdrive/C/Users/yafei/AppDeveloperWorkspace/Android/CoamApp/Telegram-master/TMessagesProj/jni</span><br><span class="line">$ <span class="variable">$ndkbuild</span></span><br><span class="line">=or win cmd==========</span><br><span class="line"><span class="built_in">cd</span> C:\Users\yafei\AppDeveloperWorkspace\Android\CoamApp\Telegram-master\TMessagesProj\jni</span><br><span class="line">C:\TDDownload\android-ndk-r11c-windows-x86_64\android-ndk-r11c\ndk-build.cmd</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="开发约定规范事项"><a href="#开发约定规范事项" class="headerlink" title="开发约定规范事项"></a>开发约定规范事项</h3><ul>
<li>所有 [CoamAndroid/app/main/src/eu.siacs.conversations/*] 下的代码,增加部分标注以 [//M +++&gt;] 开头,以 [//M +++&lt;] 结尾;删减部分标注以 [//M —&gt;] 开头,以 [//M —&lt;] 结尾</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Java/LearnOkHttp" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/10/Java/LearnOkHttp/" class="article-date">
      <time datetime="2016-01-10T11:41:31.000Z" itemprop="datePublished">2016-01-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/10/Java/LearnOkHttp/">Title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="Square-OkHttp-开发指南"><a href="#Square-OkHttp-开发指南" class="headerlink" title="Square OkHttp 开发指南"></a>Square OkHttp 开发指南</h3><p><a href="http://square.github.io/okhttp/javadoc/index.html" target="_blank" rel="external">OkHttp文档</a></p>
<h4 id="同步get"><a href="#同步get" class="headerlink" title="同步get"></a>同步get</h4><blockquote>
<p>下载一个文件,打印他的响应头,以string形式打印响应体.<br>响应体的 string() 方法对于小文档来说十分方便. 高效.但是如果响应体太大(超过1MB),应避免适应 string()方法 ,因为他会将把整个文档加载到内存中.<br>对于超过1MB的响应body,应使用流的方式来处理body.</p>
</blockquote>
<pre><code>private final OkHttpClient client = new OkHttpClient();
public void run() throws Exception {
    Request request = new Request.Builder()
        .url(&quot;http://publicobject.com/helloworld.txt&quot;)
        .build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    Headers responseHeaders = response.headers();
    for (int i = 0; i &lt; responseHeaders.size(); i++) {
        System.out.println(responseHeaders.name(i) + &quot;: &quot; + responseHeaders.value(i));
    }

    System.out.println(response.body().string());
}
</code></pre><h4 id="异步get"><a href="#异步get" class="headerlink" title="异步get"></a>异步get</h4><blockquote>
<p>在一个工作线程中下载文件,当响应可读时回调Callback接口.读取响应时会阻塞当前线程.OkHttp现阶段不提供异步api来接收响应体.</p>
</blockquote>
<pre><code>private final OkHttpClient client = new OkHttpClient();
public void run() throws Exception {
    Request request = new Request.Builder()
        .url(&quot;http://publicobject.com/helloworld.txt&quot;)
        .build();

    client.newCall(request).enqueue(new Callback() {
      @Override public void onFailure(Request request, Throwable throwable) {
        throwable.printStackTrace();
      }

      @Override public void onResponse(Response response) throws IOException {
        if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

        Headers responseHeaders = response.headers();
        for (int i = 0; i &lt; responseHeaders.size(); i++) {
          System.out.println(responseHeaders.name(i) + &quot;: &quot; + responseHeaders.value(i));
        }

        System.out.println(response.body().string());
      }
    });
}
</code></pre><h4 id="提取响应头"><a href="#提取响应头" class="headerlink" title="提取响应头"></a>提取响应头</h4><blockquote>
<p>典型的HTTP头 像是一个 Map<string, string=""> :每个字段都有一个或没有值.但是一些头允许多个值,像Guava的Multimap.例如:HTTP响应里面提供的Vary响应头,就是多值的.OkHttp的api试图让这些情况都适用.<br>当写请求头的时候,使用header(name, value)可以设置唯一的name. value.如果已经有值,旧的将被移除,然后添加新的.使用addHeader(name, value)可以添加多值(添加,不移除已有的).<br>当读取响应头时,使用header(name)返回最 后出现的name. value.通常情况这也是唯一的name. value.如果没有值,那么header(name)将返回null.如果想读取字段对应的所有值,使用headers(name)会返回一个list.<br>为了获取所有的Header,Headers类支持按index访问.</string,></p>
</blockquote>
<pre><code>private final OkHttpClient client = new OkHttpClient();
public void run() throws Exception {
    Request request = new Request.Builder()
        .url(&quot;https://api.github.com/repos/square/okhttp/issues&quot;)
        .header(&quot;User-Agent&quot;, &quot;OkHttp Headers.java&quot;)
        .addHeader(&quot;Accept&quot;, &quot;application/json; q=0.5&quot;)
        .addHeader(&quot;Accept&quot;, &quot;application/vnd.github.v3+json&quot;)
        .build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    System.out.println(&quot;Server: &quot; + response.header(&quot;Server&quot;));
    System.out.println(&quot;Date: &quot; + response.header(&quot;Date&quot;));
    System.out.println(&quot;Vary: &quot; + response.headers(&quot;Vary&quot;));
}
</code></pre><h4 id="Post方式提交String"><a href="#Post方式提交String" class="headerlink" title="Post方式提交String"></a>Post方式提交String</h4><blockquote>
<p>使用HTTP POST提交请求到服务.这个例子提交了一个markdown文档到web服务,以HTML方式渲染markdown.因为整个请求体都在内存中,因此避免使用此api提交大文档(大于1MB).</p>
</blockquote>
<pre><code>public static final MediaType MEDIA_TYPE_MARKDOWN = MediaType.parse(&quot;text/x-markdown; charset=utf-8&quot;);
private final OkHttpClient client = new OkHttpClient();
public void run() throws Exception {
    String postBody = &quot;&quot;
        + &quot;Releases\n&quot;
        + &quot;--------\n&quot;
        + &quot;\n&quot;
        + &quot; * _1.0_ May 6, 2013\n&quot;
        + &quot; * _1.1_ June 15, 2013\n&quot;
        + &quot; * _1.2_ August 11, 2013\n&quot;;

    Request request = new Request.Builder()
        .url(&quot;https://api.github.com/markdown/raw&quot;)
        .post(RequestBody.create(MEDIA_TYPE_MARKDOWN, postBody))
        .build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    System.out.println(response.body().string());
}
</code></pre><h4 id="Post方式提交流"><a href="#Post方式提交流" class="headerlink" title="Post方式提交流"></a>Post方式提交流</h4><blockquote>
<p>以流的方式POST提交请求体.请求体的内容由流写入产生.这个例子是流直接写入Okio的BufferedSink.你的程序可能会使用OutputStream,你可以使用BufferedSink.outputStream()来获取.</p>
</blockquote>
<pre><code>public static final MediaType MEDIA_TYPE_MARKDOWN
      = MediaType.parse(&quot;text/x-markdown; charset=utf-8&quot;);

private final OkHttpClient client = new OkHttpClient();

public void run() throws Exception {
    RequestBody requestBody = new RequestBody() {
      @Override public MediaType contentType() {
        return MEDIA_TYPE_MARKDOWN;
      }

      @Override public void writeTo(BufferedSink sink) throws IOException {
        sink.writeUtf8(&quot;Numbers\n&quot;);
        sink.writeUtf8(&quot;-------\n&quot;);
        for (int i = 2; i &lt;= 997; i++) {
          sink.writeUtf8(String.format(&quot; * %s = %s\n&quot;, i, factor(i)));
        }
      }

      private String factor(int n) {
        for (int i = 2; i &lt; n; i++) {
          int x = n / i;
          if (x * i == n) return factor(x) + &quot; × &quot; + i;
        }
        return Integer.toString(n);
      }
    };

    Request request = new Request.Builder()
        .url(&quot;https://api.github.com/markdown/raw&quot;)
        .post(requestBody)
        .build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    System.out.println(response.body().string());
}
</code></pre><h4 id="Post方式提交文件"><a href="#Post方式提交文件" class="headerlink" title="Post方式提交文件"></a>Post方式提交文件</h4><blockquote>
<p>以文件作为请求体是十分简单的.</p>
</blockquote>
<pre><code>public static final MediaType MEDIA_TYPE_MARKDOWN
  = MediaType.parse(&quot;text/x-markdown; charset=utf-8&quot;);

private final OkHttpClient client = new OkHttpClient();

public void run() throws Exception {
    File file = new File(&quot;README.md&quot;);

    Request request = new Request.Builder()
        .url(&quot;https://api.github.com/markdown/raw&quot;)
        .post(RequestBody.create(MEDIA_TYPE_MARKDOWN, file))
        .build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    System.out.println(response.body().string());
}
</code></pre><h4 id="Post方式提交表单"><a href="#Post方式提交表单" class="headerlink" title="Post方式提交表单"></a>Post方式提交表单</h4><blockquote>
<p>使用FormEncodingBuilder来构建和HTML<form>标签相同效果的请求体.键值对将使用一种HTML兼容形式的URL编码来进行编码.</form></p>
</blockquote>
<pre><code>private final OkHttpClient client = new OkHttpClient();

public void run() throws Exception {
    RequestBody formBody = new FormEncodingBuilder()
        .add(&quot;search&quot;, &quot;Jurassic Park&quot;)
        .build();
    Request request = new Request.Builder()
        .url(&quot;https://en.wikipedia.org/w/index.php&quot;)
        .post(formBody)
        .build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    System.out.println(response.body().string());
}
</code></pre><h4 id="Post方式提交分块请求"><a href="#Post方式提交分块请求" class="headerlink" title="Post方式提交分块请求"></a>Post方式提交分块请求</h4><blockquote>
<p>MultipartBuilder可以构建复杂的请求体,与HTML文件上传形式兼容.多块请求体中每块请求都是一个请求体,可以定义自己的请求头.这些请求头可以用来描述这块请求,例如他的Content-Disposition.如果Content-Length和Content-Type可用的话,他们会被自动添加到请求头中.</p>
</blockquote>
<pre><code>private static final String IMGUR_CLIENT_ID = &quot;...&quot;;
private static final MediaType MEDIA_TYPE_PNG = MediaType.parse(&quot;image/png&quot;);

private final OkHttpClient client = new OkHttpClient();

public void run() throws Exception {
    // Use the imgur image upload API as documented at https://api.imgur.com/endpoints/image
    RequestBody requestBody = new MultipartBuilder()
        .type(MultipartBuilder.FORM)
        .addPart(
            Headers.of(&quot;Content-Disposition&quot;, &quot;form-data; name=\&quot;title\&quot;&quot;),
            RequestBody.create(null, &quot;Square Logo&quot;))
        .addPart(
            Headers.of(&quot;Content-Disposition&quot;, &quot;form-data; name=\&quot;image\&quot;&quot;),
            RequestBody.create(MEDIA_TYPE_PNG, new File(&quot;website/static/logo-square.png&quot;)))
        .build();

    Request request = new Request.Builder()
        .header(&quot;Authorization&quot;, &quot;Client-ID &quot; + IMGUR_CLIENT_ID)
        .url(&quot;https://api.imgur.com/3/image&quot;)
        .post(requestBody)
        .build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    System.out.println(response.body().string());
}
</code></pre><h4 id="使用Gson来解析JSON响应"><a href="#使用Gson来解析JSON响应" class="headerlink" title="使用Gson来解析JSON响应"></a>使用Gson来解析JSON响应</h4><blockquote>
<p>Gson是一个在JSON和Java对象之间转换非常方便的api.这里我们用Gson来解析Github API的JSON响应.<br>注意:ResponseBody.charStream()使用响应头Content-Type指定的字符集来解析响应体.默认是UTF-8.</p>
</blockquote>
<pre><code>private final OkHttpClient client = new OkHttpClient();
private final Gson gson = new Gson();

public void run() throws Exception {
    Request request = new Request.Builder()
        .url(&quot;https://api.github.com/gists/c2a7c39532239ff261be&quot;)
        .build();
    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    Gist gist = gson.fromJson(response.body().charStream(), Gist.class);
    for (Map.Entry&lt;String, GistFile&gt; entry : gist.files.entrySet()) {
      System.out.println(entry.getKey());
      System.out.println(entry.getValue().content);
    }
}

static class Gist {
    Map&lt;String, GistFile&gt; files;
}

static class GistFile {
    String content;
}
</code></pre><h4 id="响应缓存"><a href="#响应缓存" class="headerlink" title="响应缓存"></a>响应缓存</h4><blockquote>
<p>为了缓存响应,你需要一个你可以读写的缓存目录,和缓存大小的限制.这个缓存目录应该是私有的,不信任的程序应不能读取缓存内容.<br>一个缓存目录同时拥有多个缓存访问是错误的.大多数程序只需要调用一次new OkHttp(),在第一次调用时配置好缓存,然后其他地方只需要调用这个实例就可以了.否则两个缓存示例互相干扰,破坏响应缓存,而且有可能会导致程序崩溃.<br>响应缓存使用HTTP头作为配置.你可以在请求头中添加Cache-Control: max-stale=3600 ,OkHttp缓存会支持.你的服务通过响应头确定响应缓存多长时间,例如使用Cache-Control: max-age=9600.</p>
</blockquote>
<pre><code>private final OkHttpClient client;
public CacheResponse(File cacheDirectory) throws Exception {
    int cacheSize = 10 * 1024 * 1024; // 10 MiB
    Cache cache = new Cache(cacheDirectory, cacheSize);

    client = new OkHttpClient();
    client.setCache(cache);
}

public void run() throws Exception {
    Request request = new Request.Builder()
        .url(&quot;http://publicobject.com/helloworld.txt&quot;)
        .build();

    Response response1 = client.newCall(request).execute();
    if (!response1.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response1);

    String response1Body = response1.body().string();
    System.out.println(&quot;Response 1 response:          &quot; + response1);
    System.out.println(&quot;Response 1 cache response:    &quot; + response1.cacheResponse());
    System.out.println(&quot;Response 1 network response:  &quot; + response1.networkResponse());

    Response response2 = client.newCall(request).execute();
    if (!response2.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response2);

    String response2Body = response2.body().string();
    System.out.println(&quot;Response 2 response:          &quot; + response2);
    System.out.println(&quot;Response 2 cache response:    &quot; + response2.cacheResponse());
    System.out.println(&quot;Response 2 network response:  &quot; + response2.networkResponse());

    System.out.println(&quot;Response 2 equals Response 1? &quot; + response1Body.equals(response2Body));
}
</code></pre><hr>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p>在这一节还提到了下面一句:<br>There are cache headers to force a cached response, force a network response, or force the network response to be validated with a conditional GET.</p>
<p>我不是很懂cache,平时用到的也不多,所以把Google在Android Developers一段相关的解析放到这里吧.</p>
<p>Force a Network Response<br>In some situations, such as after a user clicks a ‘refresh’ button, it may be necessary to skip the cache, and fetch data directly from the server. To force a full refresh, add the no-cache directive:<br>connection.addRequestProperty(“Cache-Control”, “no-cache”);<br>If it is only necessary to force a cached response to be validated by the server, use the more efficient max-age=0 instead:</p>
<p>connection.addRequestProperty(“Cache-Control”, “max-age=0”);<br>Force a Cache Response</p>
<p>Sometimes you’ll want to show resources if they are available immediately, but not otherwise. This can be used so your application can show something while waiting for the latest data to be downloaded. To restrict a request to locally-cached resources, add the only-if-cached directive:</p>
<pre><code>try {
     connection.addRequestProperty(&quot;Cache-Control&quot;, &quot;only-if-cached&quot;);
     InputStream cached = connection.getInputStream();
     // the resource was cached! show it
  catch (FileNotFoundException e) {
     // the resource was not cached
  }
}
This technique works even better in situations where a stale response is better than no response. To permit stale cached responses, use the max-stale directive with the maximum staleness in seconds:

int maxStale = 60 * 60 * 24 * 28; // tolerate 4-weeks stale
connection.addRequestProperty(&quot;Cache-Control&quot;, &quot;max-stale=&quot; + maxStale);
</code></pre><p>以上信息来自:HttpResponseCache - Android SDK | Android Developers</p>
<h4 id="取消一个Call"><a href="#取消一个Call" class="headerlink" title="取消一个Call"></a>取消一个Call</h4><blockquote>
<p>使用Call.cancel()可以立即停止掉一个正在执行的call.如果一个线程正在写请求或者读响应,将会引发IOException.当call没有必要的时候,使用这个api可以节约网络资源.例如当用户离开一个应用时.不管同步还是异步的call都可以取消.<br>你可以通过tags来同时取消多个请求.当你构建一请求时,使用RequestBuilder.tag(tag)来分配一个标签.之后你就可以用OkHttpClient.cancel(tag)来取消所有带有这个tag的call.</p>
</blockquote>
<pre><code>private final ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);
private final OkHttpClient client = new OkHttpClient();

public void run() throws Exception {
    Request request = new Request.Builder()
        .url(&quot;http://httpbin.org/delay/2&quot;) // This URL is served with a 2 second delay.
        .build();

    final long startNanos = System.nanoTime();
    final Call call = client.newCall(request);

    // Schedule a job to cancel the call in 1 second.
    executor.schedule(new Runnable() {
      @Override public void run() {
        System.out.printf(&quot;%.2f Canceling call.%n&quot;, (System.nanoTime() - startNanos) / 1e9f);
        call.cancel();
        System.out.printf(&quot;%.2f Canceled call.%n&quot;, (System.nanoTime() - startNanos) / 1e9f);
      }
    }, 1, TimeUnit.SECONDS);

    try {
      System.out.printf(&quot;%.2f Executing call.%n&quot;, (System.nanoTime() - startNanos) / 1e9f);
      Response response = call.execute();
      System.out.printf(&quot;%.2f Call was expected to fail, but completed: %s%n&quot;,
          (System.nanoTime() - startNanos) / 1e9f, response);
    } catch (IOException e) {
      System.out.printf(&quot;%.2f Call failed as expected: %s%n&quot;,
          (System.nanoTime() - startNanos) / 1e9f, e);
    }
}
</code></pre><h4 id="超时"><a href="#超时" class="headerlink" title="超时"></a>超时</h4><blockquote>
<p>没有响应时使用超时结束call.没有响应的原因可能是客户点链接问题. 服务器可用性问题或者这之间的其他东西.OkHttp支持连接,读取和写入超时.</p>
</blockquote>
<pre><code>private final OkHttpClient client;

public ConfigureTimeouts() throws Exception {
    client = new OkHttpClient();
    client.setConnectTimeout(10, TimeUnit.SECONDS);
    client.setWriteTimeout(10, TimeUnit.SECONDS);
    client.setReadTimeout(30, TimeUnit.SECONDS);
}

public void run() throws Exception {
    Request request = new Request.Builder()
        .url(&quot;http://httpbin.org/delay/2&quot;) // This URL is served with a 2 second delay.
        .build();

    Response response = client.newCall(request).execute();
    System.out.println(&quot;Response completed: &quot; + response);
}
</code></pre><h4 id="每个call的配置"><a href="#每个call的配置" class="headerlink" title="每个call的配置"></a>每个call的配置</h4><blockquote>
<p>使用OkHttpClient,所有的HTTP Client配置包括代理设置. 超时设置. 缓存设置.当你需要为单个call改变配置的时候,clone 一个 OkHttpClient.这个api将会返回一个浅拷贝(shallow copy),你可以用来单独自定义.下面的例子中,我们让一个请求是500ms的超时. 另一个是3000ms的超时.</p>
</blockquote>
<pre><code>private final OkHttpClient client = new OkHttpClient();
public void run() throws Exception {
    Request request = new Request.Builder()
        .url(&quot;http://httpbin.org/delay/1&quot;) // This URL is served with a 1 second delay.
        .build();

    try {
      Response response = client.clone() // Clone to make a customized OkHttp for this request.
          .setReadTimeout(500, TimeUnit.MILLISECONDS)
          .newCall(request)
          .execute();
      System.out.println(&quot;Response 1 succeeded: &quot; + response);
    } catch (IOException e) {
      System.out.println(&quot;Response 1 failed: &quot; + e);
    }

    try {
      Response response = client.clone() // Clone to make a customized OkHttp for this request.
          .setReadTimeout(3000, TimeUnit.MILLISECONDS)
          .newCall(request)
          .execute();
      System.out.println(&quot;Response 2 succeeded: &quot; + response);
    } catch (IOException e) {
      System.out.println(&quot;Response 2 failed: &quot; + e);
    }
}
</code></pre><h4 id="处理验证"><a href="#处理验证" class="headerlink" title="处理验证"></a>处理验证</h4><blockquote>
<p>这部分和HTTP AUTH有关.<br>相关资料:HTTP AUTH 那些事 - 王绍全的博客 - 博客频道 - CSDN.NET<br>OkHttp会自动重试未验证的请求.当响应是401 Not Authorized时,Authenticator会被要求提供证书.Authenticator的实现中需要建立一个新的包含证书的请求.如果没有证书可用,返回null来跳过尝试.</p>
</blockquote>
<pre><code>public List&lt;Challenge&gt; challenges()
Returns the authorization challenges appropriate for this response&apos;s code. If the response code is 401 unauthorized, this returns the &quot;WWW-Authenticate&quot; challenges. If the response code is 407 proxy unauthorized, this returns the &quot;Proxy-Authenticate&quot; challenges. Otherwise this returns an empty list of challenges.
当需要实现一个Basic challenge, 使用Credentials.basic(username, password)来编码请求头.

private final OkHttpClient client = new OkHttpClient();

public void run() throws Exception {
    client.setAuthenticator(new Authenticator() {
      @Override public Request authenticate(Proxy proxy, Response response) {
        System.out.println(&quot;Authenticating for response: &quot; + response);
        System.out.println(&quot;Challenges: &quot; + response.challenges());
        String credential = Credentials.basic(&quot;jesse&quot;, &quot;password1&quot;);
        return response.request().newBuilder()
            .header(&quot;Authorization&quot;, credential)
            .build();
      }

      @Override public Request authenticateProxy(Proxy proxy, Response response) {
        return null; // Null indicates no attempt to authenticate.
      }
    });

    Request request = new Request.Builder()
        .url(&quot;http://publicobject.com/secrets/hellosecret.txt&quot;)
        .build();

    Response response = client.newCall(request).execute();
    if (!response.isSuccessful()) throw new IOException(&quot;Unexpected code &quot; + response);

    System.out.println(response.body().string());
}
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Http/HttpNote" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/08/Http/HttpNote/" class="article-date">
      <time datetime="2016-01-08T04:28:31.000Z" itemprop="datePublished">2016-01-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/08/Http/HttpNote/">Http协议相关</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="Http协议相关"><a href="#Http协议相关" class="headerlink" title="Http协议相关"></a>Http协议相关</h1>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
        <p class="article-more-link">
          <a  href="/2016/01/08/Http/HttpNote/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-Others/MarkDownNote" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/08/Others/MarkDownNote/" class="article-date">
      <time datetime="2016-01-08T02:51:31.000Z" itemprop="datePublished">2016-01-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/08/Others/MarkDownNote/">MarkDown 相关</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="Markdown-相关笔记摘要"><a href="#Markdown-相关笔记摘要" class="headerlink" title="Markdown 相关笔记摘要"></a>Markdown 相关笔记摘要</h1><p><a href="http://www.debug4.me/%E5%B7%A5%E5%85%B7/markdown-learning/">Markdown标准语法与GitHub Flavored Markdown语法大全</a></p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/markdown/">markdown</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/markdown-gfw-hexo-jekyll/">markdown gfw hexo jekyll</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a  href="/2016/01/08/Others/MarkDownNote/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/8/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 张亚飞
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的静态博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减双栏 Hexo 博客主题">Yelee</a> by MOxFIVE
            </div>
        </div>
        <div class="visit">
            <span id="busuanzi_container_site_pv" style='display:none'>
                <span id="site-visit" >本站到访数: 
                    <span id="busuanzi_value_site_uv"></span>
                </span>
            </span>
            <span id="busuanzi_container_page_pv" style='display:none'>
                <span id="page-visit">, 本页阅读量: 
                    <span id="busuanzi_value_page_pv"></span>
                </span>
            </span>
        </div>
    </div>
</footer>
    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>